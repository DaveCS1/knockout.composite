<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Single knockout.composite Test</title>
    <link rel="stylesheet" href="Scripts/qunit.css" type="text/css" media="screen">
    <script type="text/javascript" src="../Source/Libraries/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="../Source/Libraries/knockout-2.1.0.debug.js"></script>
    <script type="text/javascript" src="Scripts/qunit.js"></script>
    <script type="text/javascript" src="Scripts/json2.js"></script>
    <script type="text/javascript" src="Scripts/jquery.mockjax.js"></script>
    <script type="text/javascript" src="Scripts/sinon-1.4.2.js"></script>

    <script type="text/javascript" src="../knockout.composite.js"></script>

    <script type="text/javascript" src="Scripts/defaults.js"></script>
    <script type="text/javascript" src="Scripts/testHelpers.js"></script>

    <script type="text/javascript">
        $(function () {
            test("script dependencies are loaded cross domain if a full URL is provided", function () {
                var oldLoadFunction = ko.composite.resources.loadCrossDomainScript;
                var spy = sinon.spy();
                ko.composite.resources.loadCrossDomainScript = spy;
                ko.composite.resources.loadDependencies('', { requires: { scripts: ['http://another.domain.com/script.js']} });
                ko.composite.resources.loadCrossDomainScript = oldLoadFunction;

                ok(spy.called);
            });
        });
    </script>
</head>
<body>
    <h1 id="qunit-header">QUnit Test Suite</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
    <div id="qunit-fixture"></div>
</body>
</html>
